# Copyright (c) Vaimo Group. All rights reserved.
# See LICENSE_VAIMO.txt for license details.
language: php
  
addons:
  apt:
    update: true

git:
  depth: 1
  
cache:
  directories:
    - "$HOME/.cache/composer"
    - "$HOME/.composer/cache"

before_install:
  - sudo apt-get -y install git

env:
  jobs:
    - COMPOSER_VERSION=1.8.4
    - COMPOSER_VERSION=2.0.9

script:
  - rm -rf vendor
  - rm -rf $HOME/.composer/cache
  - composer self-update ${COMPOSER_VERSION}
  - cp composer-v${COMPOSER_VERSION:0:1}.lock composer.lock 2>/dev/null || true
  - composer install
  - composer ci:build
