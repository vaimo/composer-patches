# Copyright (c) Vaimo Group. All rights reserved.
# See LICENSE_VAIMO.txt for license details.
language: php
  
git:
  depth: 1
  
cache:
  directories:
    - "$HOME/.cache/composer"
    - "$HOME/.composer/cache"

before_install:
  - apt-get install -y git

jobs:
  - COMPOSER_VERSION=1.8.4
  - COMPOSER_VERSION=2.0.9

script:
  - git --version
  - rm -rf vendor
  - rm -rf $HOME/.composer/cache
  - cp composer-v${COMPOSER_VERSION:0:1}.lock composer.lock 2>/dev/null && exit 0
  - composer self-update $COMPOSER_VERSION
  - composer install
  - composer ci:build
