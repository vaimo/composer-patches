# Copyright (c) Vaimo Group. All rights reserved.
# See LICENSE_VAIMO.txt for license details.
language: php
  
git:
  depth: 1
  
cache:
  directories:
    - "$HOME/.cache/composer"
    - "$HOME/.composer/cache"

install:

script:
  - cp composer.lock composer-v2.lock
  - cp composer-v1.lock composer.lock
  - composer self-update 1.8.4
  - composer install
  - composer ci:build
  - rm -rf vendor
  - rm -rf $HOME/.composer/cache
  - cp composer-v2.lock composer.lock
  - composer self-update --rollback
  - composer install
  - composer ci:build
